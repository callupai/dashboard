webpackJsonp([1],{0:function(t,e){},"3z5P":function(t,e,n){"use strict";function o(t){n("nY+g")}var r=n("IOPY"),i=n("8Gxx"),a=n("VU/8"),s=o,c=a(r.a,i.a,!1,s,"data-v-59fb8cba",null);e.a=c.exports},"5ImK":function(t,e){},"8Gxx":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-select",{attrs:{placeholder:"Column filter"},model:{value:t.filterColumn,callback:function(e){t.filterColumn=e},expression:"filterColumn"}},t._l(t.filterColumnOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),t._v(" "),n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Search by description/subject/ticket number"},on:{change:t.searchResults},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),n("el-button",{on:{click:t.searchResults}},[t._v("Search")])],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{on:{click:t.previousPage}},[t._v("Previous")]),t._v(" "),n("el-button",{on:{click:t.firstPage}},[t._v("First")]),t._v(" "),n("el-button",{on:{click:t.refreshPage}},[t._v("Refresh")]),t._v(" "),n("el-button",{on:{click:t.lastPage}},[t._v("Last")]),t._v(" "),n("el-button",{on:{click:t.nextPage}},[t._v("Next")])],1)],1)],1),t._v(" "),n("el-main",[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:this.$store.state.tickets}},[n("el-table-column",{attrs:{fixed:"",width:"400",prop:"description",label:"Description"}}),t._v(" "),n("el-table-column",{attrs:{prop:"subject",label:"Subject",sortable:"",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{width:"250",prop:"predicted_intent.intent_name",sortable:"",label:"Predicted intent"}}),t._v(" "),n("el-table-column",{attrs:{width:"180",prop:"corrected_intent.intent_name",sortable:"",label:"Corrected intent"}}),t._v(" "),n("el-table-column",{attrs:{prop:"confidence",label:"Confidence",sortable:"",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"merchant_ticket_number",label:"Ticket #",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"Date",formatter:t.formatDateAsIst,width:"200"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){t.markAsCorrect(e.row)}}},[t._v("Correct\n              ")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.intentCorrectionPage(e.row)}}},[t._v("Wrong\n              ")])]}}])})],1)],1)],1)],1)],1)},r=[],i={render:o,staticRenderFns:r};e.a=i},"9QPA":function(t,e){},"A/wn":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-dialog",{attrs:{title:"Call-Up Trainer Login",visible:t.dialogVisible,width:"30%","close-on-press-escape":!1,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{staticClass:"auth-form",attrs:{model:t.authForm}},[n("el-form-item",{attrs:{label:"Username"}},[n("el-input",{attrs:{placeholder:"Email"},model:{value:t.authForm.username,callback:function(e){t.$set(t.authForm,"username",e)},expression:"authForm.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.authForm.password,callback:function(e){t.$set(t.authForm,"password",e)},expression:"authForm.password"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.tryLogin}},[t._v("Login")])],1)],1),t._v(" "),n("el-header",[t.$store.state.user.token?n("el-menu",{attrs:{mode:"horizontal","background-color":"#fff","text-color":"#000","active-text-color":"#ffd04b"}},[n("el-menu-item",{attrs:{index:"1",disabled:""}},[t._v("Call up")]),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("User "+t._s(t.userProfile.email))]),t._v(" "),n("el-menu-item",{attrs:{index:"2-1"},on:{click:t.logout}},[t._v("Logout")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"3"}})],1):t._e()],1),t._v(" "),n("el-container",{staticStyle:{height:"91vh"}},[n("el-aside",{attrs:{width:"200px"}},[n("el-menu",[n("a",{attrs:{href:"#/"}},[n("el-menu-item",{attrs:{index:"1-1"}},[t._v("\n            Tickets List\n          ")])],1),t._v(" "),n("a",{attrs:{href:"#/ticket/stats"}},[n("el-menu-item",{attrs:{index:"1-2"}},[t._v("\n            Tickets stats\n          ")])],1)])],1),t._v(" "),n("el-main",[t.$store.state.user.token?n("router-view"):t._e()],1)],1)],1)},r=[],i={render:o,staticRenderFns:r};e.a=i},Cq4M:function(t,e){},IOPY:function(t,e,n){"use strict";var o=n("7+uW"),r=n("c+8m"),i=n.n(r),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.snackbar_tkt="",e.query="",e.filterColumn="",e.filterColumnOptions=[{name:"Description",value:"description"},{name:"Subject",value:"subject"},{name:"Ticket #",value:"merchant_ticket_id"}],e}return a(e,t),e.prototype.firstPage=function(){this.$store.commit("setPage",{number:1,size:this.$store.state.ticketPagination.size}),this.$store.commit("refreshTickets")},e.prototype.refreshPage=function(){this.$store.commit("refreshTickets")},e.prototype.searchResults=function(){console.log("search query",this.query),this.query&&this.query.length>0?this.$store.commit("setQuery",[{column:this.filterColumn,operator:"contains",value:this.query}]):this.$store.commit("setQuery",[]),this.$store.commit("refreshTickets")},e.prototype.filterPredictedHandler=function(){console.log("filter predicted handler",arguments)},e.prototype.nextPage=function(){this.$store.commit("setPage",{number:this.$store.state.ticketPagination.number+1,size:this.$store.state.ticketPagination.size}),this.$store.commit("refreshTickets")},e.prototype.lastPage=function(){this.$store.commit("setPage",{number:this.$store.state.ticketPagination.lastPage,size:this.$store.state.ticketPagination.size}),this.$store.commit("refreshTickets")},e.prototype.previousPage=function(){this.$store.state.ticketPagination.number<2||(this.$store.commit("setPage",{number:this.$store.state.ticketPagination.number-1,size:this.$store.state.ticketPagination.size}),this.$store.commit("refreshTickets"))},e.prototype.onClick=function(){console.log("a non-vuex method has been called")},e.prototype.intentCorrectionPage=function(t){this.$router.push({name:"MarkCorrectIntent",params:{ticket_id:t.reference_id}})},e.prototype.formatDateAsIst=function(t,e,n,o){var r=new Date(new Date(n).getTime()+198e5);return r.toDateString().split("2018")[0]+r.toTimeString().split(" ")[0]},e.prototype.markAsCorrect=function(t){console.log("mark as correct",arguments);var e=this;e.$store.state.client.jsonApi.update("ticket",{id:t.reference_id,corrected_intent:t.predicted_intent}).then(function(t){console.log("update ticket response",t),e.$store.commit("refreshTickets")})},e.prototype.showSnackbar=function(t){this.snackbar_tkt=t;var e=document.getElementById("snackbar");e.className="show",setTimeout(function(){e.className=e.className.replace("show","")},3e3)},e=s([i()({})],e)}(o.default);e.a=c},M93x:function(t,e,n){"use strict";function o(t){n("9QPA")}var r=n("edak"),i=n("A/wn"),a=n("VU/8"),s=o,c=a(r.a,i.a,!1,s,null,null);e.a=c.exports},"P/YC":function(t,e,n){"use strict";var o=n("7+uW"),r=n("c+8m"),i=n.n(r),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ticketId="",e.ticket={},e.correctIntent={},e.correctIntentName="",e}return a(e,t),e.prototype.chooseIntent=function(t){this.correctIntentName=t.intent_name},e.prototype.cancelUpdate=function(){this.$router.push({name:"TicketTable"})},e.prototype.alterIntent=function(t){var e=this;console.log("choosen Intent object"),console.log(t),e.correctIntent=t,console.log("todo intent patch call with correctIntent"),console.log("update on server"),e.$store.state.client.jsonApi.update("ticket",{id:e.$route.params.ticket_id,corrected_intent:e.correctIntent}).then(function(t){console.log("update ticket response",t),e.$store.commit("refreshTickets"),e.$router.push({name:"TicketTable"})})},e.prototype.setIntent=function(){for(var t=this,e=0,n=t.$store.state.intents;e<n.length;e++){var o=n[e];if(console.log("intents:"+o.intent_name+"\n"),this.correctIntentName==o.intent_name)return void t.alterIntent(o)}console.log("this looks like a new intent to me :)"),t.$store.state.client.jsonApi.create("intent",{intent_name:t.correctIntentName}).then(function(e){console.log("new intent creation response",e),t.alterIntent(e.data),t.$store.commit("refreshIntents")})},e.prototype.mounted=function(){var t=this;this.ticketId=this.$route.params.ticket_id,console.log("loaded mark correct intent",this.ticketId,this.$store.state),this.$store.state.client.jsonApi.find("ticket",this.ticketId,{included_relations:"intent"}).then(function(e){console.log(e.data),t.ticket=e.data,console.log("loaded ticket",e.data)})},e=s([i()({name:"LinkComponent"})],e)}(o.default);e.a=c},"V/Al":function(t,e,n){"use strict";var o=n("7+uW"),r=n("NYxO"),i=n("MFtw");n.n(i);o.default.use(r.a);var a=window.localStorage.getItem("token"),s=new i.DaptinClient("http://dashboard.callup.ai:8080",!1);s.worldManager.loadModels().then(function(){a&&(s.jsonApi.findAll("ticket",{included_relations:"intent",page:u.ticketPagination,sort:"-created_at"}).then(function(t){console.log("all tickets",t.data,arguments),u.tickets=t.data,u.ticketPagination.lastPage=t.links.last_page}),s.jsonApi.findAll("intent",{page:{size:500,number:1}}).then(function(t){console.log("all intents",t.data),u.intents=t.data}))});var c={reverse:function(t){return t.links.reverse()},logout:function(t){t.user={}},refreshStats:function(t){t.user.token&&s.statsManager.getStats("intent",{group:"id,intent_name"}).then(function(e){console.log("intent array",e.data);var n={};e.data.map(function(t){n[t.id]=t.intent_name}),console.log("intent map",n);var o=[],r={};s.statsManager.getStats("ticket",{group:"date(created_at),subject,predicted_intent,corrected_intent",column:"count(*)"}).then(function(e){console.log("Stats resolved",e),t.ticketStats=e.data,t.ticketStats.map(function(t){var e=t["date(created_at)"];-1==o.indexOf(e)&&(o.push(e),r[e]={date:e,data:[]}),t.predicted_intent=n[t.predicted_intent],t.corrected_intent=n[t.corrected_intent],r[e].data.push(t)}),o.sort(),o.reverse(),console.log("dates",o),t.statsByDates=r,t.dates=o})})},refreshTickets:function(t){t.user.token&&s.jsonApi.findAll("ticket",{included_relations:"intent",page:t.ticketPagination,sort:"-created_at",query:JSON.stringify(t.query)}).then(function(e){console.log("all tickets",e.data),t.tickets=e.data})},setQuery:function(t,e){t.query=e},refreshIntents:function(t){t.user.token&&s.jsonApi.findAll("intent",{page:{size:500,number:1}}).then(function(e){console.log("all intents",e.data),t.intents=e.data})},setPage:function(t,e){console.log("set page",e),t.ticketPagination=e}},l={},u={links:[],tickets:[],intents:[],client:s,user:{token:a},ticketPagination:{size:20,number:1},ticketStats:[],query:[],statsByDates:{},dates:[]};e.a=new r.a.Store({state:u,mutations:c,actions:l})},edak:function(t,e,n){"use strict";var o=n("7+uW"),r=n("c+8m"),i=n.n(r),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dialogVisible=!1,e.userProfile={},e.name="app",e.authForm={username:"",password:""},e}return a(e,t),e.prototype.tryLogin=function(){console.log("login",this.authForm),this.$store.state.client.actionManager.doAction("user","signin",{email:this.authForm.username,password:this.authForm.password}).then(function(t){console.log("sign in action response",t)})},e.prototype.logout=function(){window.localStorage.clear(),this.$store.commit("logout"),this.dialogVisible=!0},e.prototype.showLogin=function(){console.log("show login dialog"),this.dialogVisible=!0},e.prototype.mounted=function(){if(console.log("mounted app",this.$store.state.user.token),this.$store.state.user.token||(this.dialogVisible=!0),this.$store.state.user.token){var t=JSON.parse(window.localStorage.getItem("user"));this.userProfile=t}},e=s([i.a],e)}(o.default);e.a=c},f5Fa:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v("Stats")]),t._v(" "),t._l(this.$store.state.statsByDates,function(e){return n("el-main",[n("el-row",[n("el-col",{attrs:{span:24}},[n("h4",[t._v(t._s(e.date))])])],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:e.data}},[n("el-table-column",{attrs:{prop:"subject",label:"Subject",sortable:"",width:"500"}}),t._v(" "),n("el-table-column",{attrs:{prop:"predicted_intent",label:"Predicted Intent",sortable:"",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{prop:"corrected_intent",label:"Corrected Intent",sortable:"",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{prop:"count(*)",label:"Count",sortable:"",width:"180"}})],1)],1)],1)],1)})],2)},r=[],i={render:o,staticRenderFns:r};e.a=i},kGs3:function(t,e,n){"use strict";function o(t){n("5ImK")}var r=n("qkDG"),i=n("f5Fa"),a=n("VU/8"),s=o,c=a(r.a,i.a,!1,s,"data-v-d4ff00c8",null);e.a=c.exports},l8pk:function(t,e,n){"use strict";function o(t){n("Cq4M")}var r=n("P/YC"),i=n("lMvu"),a=n("VU/8"),s=o,c=a(r.a,i.a,!1,s,"data-v-0987fa8f",null);e.a=c.exports},lMvu:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("div",{staticStyle:{"text-align":"center","padding-top":"30px"}},[t._v("\n    What is the correct intent?\n    "),n("br"),t._v(" "),n("h4",[t._v(t._s(t.ticket.description))])]),t._v(" "),n("div",{staticClass:"centroid"},[n("div",{staticClass:"btn-matrix"},t._l(this.$store.state.intents,function(e){return n("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(n){t.chooseIntent(e)}}},[t._v("\n        "+t._s(e.intent_name)+"\n      ")])}))]),t._v(" "),n("div",{staticClass:"centroid"},[n("el-form",[n("el-form-item",[n("el-input",{staticClass:"form-control",attrs:{type:"text",id:"intent_value",placeholder:"correct intent"},model:{value:t.correctIntentName,callback:function(e){t.correctIntentName=e},expression:"correctIntentName"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.setIntent}},[t._v("Update")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:t.cancelUpdate}},[t._v("Cancel")])],1)],1)],1)])},r=[],i={render:o,staticRenderFns:r};e.a=i},"nY+g":function(t,e){},qkDG:function(t,e,n){"use strict";var o=n("7+uW"),r=n("c+8m"),i=n.n(r),a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.mounted=function(){this.$store.commit("refreshStats")},e=s([i()({name:"LinkComponent"})],e)}(o.default);e.a=c},tvR6:function(t,e){},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),r=n("M93x"),i=n("yDEt"),a=n("V/Al"),s=n("zL8q"),c=n.n(s),l=n("tvR6"),u=(n.n(l),n("wUZ8")),p=n.n(u);o.default.use(c.a),o.default.use(c.a,{locale:p.a}),o.default.config.productionTip=!1,new o.default({el:"#app",router:i.a,store:a.a,template:"<App/>",components:{App:r.a}})},yDEt:function(t,e,n){"use strict";var o=n("7+uW"),r=n("/ocq"),i=n("3z5P"),a=n("l8pk"),s=n("kGs3");o.default.use(r.a);var c={routes:[{path:"/",name:"TicketTable",component:i.a},{path:"/mark_correct_intent/:ticket_id",name:"MarkCorrectIntent",component:a.a,props:!0},{path:"/ticket/stats",name:"TicketStats",component:s.a,props:!0}]};e.a=new r.a(c)}},["x35b"]);
//# sourceMappingURL=app.b0b1aff94379024d2bc8.js.map